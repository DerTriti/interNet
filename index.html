<!DOCTYPE html>
<html lang="en" data-theme="auto" data-style="rounded" data-ls="off">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="color-scheme" content="light dark" />
<title>Start — Minimal Search</title>
<style>
:root{
  --bg:#fafafa;
  --surface:#ffffff;
  --text:#111827;
  --muted:#6b7280;
  --border:#e5e7eb;
  --primary:#2563eb;
  --focus:2px solid #2563eb;
  --radius-input:999px;
  --shadow:0 12px 32px rgba(0,0,0,.10);
}
html[data-theme="dark"]{
  --bg:#0b0f19;
  --surface:#111827;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --border:#1f2937;
  --primary:#60a5fa;
  --shadow:0 14px 40px rgba(0,0,0,.55);
}
html[data-style="flat"]{ --radius-input:12px; }
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font:16px/1.55 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  display:grid;
  place-items:center;
}
.container{width:min(760px,92vw);margin:auto;padding:12px}
.center{display:flex;flex-direction:column;align-items:center;gap:18px}
.form{
  width:100%;
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:center;
}
.icon-btn{
  all:unset;
  cursor:pointer;
  display:inline-flex;align-items:center;justify-content:center;
  width:44px;height:44px;
  border:1px solid var(--border);
  background:var(--surface);
  border-radius:12px;
  box-shadow:var(--shadow);
  transition:transform .15s ease,box-shadow .2s ease,background .2s ease;
}
.icon-btn:hover{transform:translateY(-1px)}
.icon{width:22px;height:22px;display:block}
.input{
  flex:1 1 auto;
  padding:16px 18px;
  border:1px solid var(--border);
  background:var(--surface);
  color:var(--text);
  border-radius:var(--radius-input);
  font-size:1.06rem;
  box-shadow:var(--shadow);
}
html[data-ls="on"] .input{ padding:22px 22px; font-size:1.2rem }
.input:focus-visible{outline:var(--focus)}
.btn{
  all:unset;
  cursor:pointer;
  padding:12px 18px;
  border-radius:12px;
  background:var(--primary);
  color:#fff;
  font-weight:700;
  box-shadow:var(--shadow);
  transition:transform .15s ease,box-shadow .2s ease;
}
.btn:hover{transform:translateY(-1px)}
.helper{color:var(--muted);font-size:.95rem}
.kbd{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;border:1px solid var(--border);padding:2px 8px;border-radius:8px}

/* suggestions (recent queries) */
.suggest{ width:100%; max-width:min(760px,92vw); margin-top:8px }
.suggest-list{
  margin:0;padding:6px;
  list-style:none;
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:12px;
  box-shadow:var(--shadow);
}
.suggest-item{ padding:8px 10px; border-radius:8px; cursor:pointer }
.suggest-item:hover{background:rgba(0,0,0,.05)}
html[data-theme="dark"] .suggest-item:hover{background:rgba(255,255,255,.08)}

/* settings sidebar (Windows 8 style) */
.overlay{
  position:fixed;inset:0;display:none;
  background:rgba(0,0,0,.35);
  backdrop-filter:blur(6px);
  z-index:20;
}
.overlay.open{display:block}
.sidebar{
  position:fixed;inset:0 0 0 auto;
  width:min(360px,92vw);
  background:var(--surface);
  border-left:1px solid var(--border);
  transform:translateX(100%);
  transition:transform .25s ease;
  z-index:30;
  display:flex;flex-direction:column;
}
.sidebar.open{transform:translateX(0)}
.side-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--border);font-weight:800}
.side-body{padding:14px 16px;display:flex;flex-direction:column;gap:14px}
.group{border:1px solid var(--border);border-radius:12px;overflow:hidden}
.group-title{padding:10px 12px;font-weight:700;border-bottom:1px solid var(--border);background:var(--surface)}
.group-body{padding:10px 12px;display:flex;flex-direction:column;gap:12px}
.row{display:flex;gap:10px;align-items:center;justify-content:space-between}
.label{color:var(--muted)}
.select,.color{
  border:1px solid var(--border);
  background:var(--surface);
  color:var(--text);
  border-radius:12px;
  padding:10px 12px;
}
.color{height:40px;width:64px;padding:4px}
.small{all:unset;border:1px solid var(--border);padding:8px 12px;border-radius:10px;cursor:pointer;background:var(--surface)}
.small:hover{transform:translateY(-1px);box-shadow:var(--shadow)}
.footer{ position:fixed; inset:auto 0 10px 0; text-align:center; color:var(--muted); font-size:.9rem }
.hidden{display:none}
</style>
</head>
<body>
  <main class="container center">
    <form id="searchForm" class="form" role="search" autocomplete="off" aria-label="Search">
      <button id="btnSettings" type="button" class="icon-btn" aria-label="Settings">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Z"/>
          <path d="M19.4 15a1.9 1.9 0 0 0 .38 2.09l.04.04a2 2 0 0 1-2.83 2.83l-.04-.04A1.9 1.9 0 0 0 15 19.4a1.9 1.9 0 0 0-1.5.73l-.02.03a2 2 0 0 1-3 0l-.02-.03A1.9 1.9 0 0 0 9 19.4a1.9 1.9 0 0 0-2.09-.38l-.04.04a2 2 0 0 1-2.83-2.83l.04-.04A1.9 1.9 0 0 0 4.6 15a1.9 1.9 0 0 0-.73-1.5l-.03-.02a2 2 0 0 1 0-3l.03-.02A1.9 1.9 0 0 0 4.6 9a1.9 1.9 0 0 0-.38-2.09l-.04-.04a2 2 0 1 1 2.83-2.83l.04.04A1.9 1.9 0 0 0 9 4.6c.57 0 1.1-.23 1.5-.73l.02-.03a2 2 0 0 1 3 0l.02.03c.4.5.93.73 1.5.73a1.9 1.9 0 0 0 2.09-.38l.04-.04a2 2 0 1 1 2.83 2.83l-.04.04c-.5.4-.73.93-.73 1.5s.23 1.1.73 1.5l.03.02a2 2 0 0 1 0 3l-.03.02c-.5.4-.73.93-.73 1.5Z"/>
        </svg>
      </button>
      <input id="q" class="input" type="search" placeholder="Search…" aria-label="Search" />
      <button class="btn" type="submit">Search</button>
    </form>

    <div id="suggestWrap" class="suggest hidden" aria-live="polite">
      <ul id="suggestList" class="suggest-list"></ul>
    </div>
  </main>

  <div class="footer">© <span id="year"></span> Start — Minimal</div>

  <div id="overlay" class="overlay" aria-hidden="true"></div>
  <aside id="sidebar" class="sidebar" aria-hidden="true">
    <div class="side-head">
      <div>Settings</div>
      <button id="btnClose" class="icon-btn" aria-label="Close settings">✕</button>
    </div>
    <div class="side-body">

      <div class="group">
        <div class="group-title">Appearance</div>
        <div class="group-body">
          <div class="row">
            <span class="label">Theme</span>
            <select id="themeSel" class="select">
              <option value="light">Light</option>
              <option value="dark">Dark</option>
              <option value="auto" selected>Auto (system)</option>
            </select>
          </div>
          <div class="row">
            <span class="label">Background</span>
            <input id="bgColor" type="color" class="color" value="#fafafa" />
          </div>
          <div class="row">
            <span class="label">Search bar</span>
            <select id="styleSel" class="select">
              <option value="rounded" selected>Rounded</option>
              <option value="flat">Flat</option>
            </select>
          </div>
        </div>
      </div>

      <div class="group">
        <div class="group-title">Search</div>
        <div class="group-body">
          <div class="row">
            <span class="label">Engine</span>
            <select id="engineSel" class="select">
              <option value="google">Google</option>
              <option value="duck">DuckDuckGo</option>
              <option value="bing">Bing</option>
              <option value="youtube">YouTube</option>
            </select>
          </div>
          <div class="row">
            <span class="label">Open results</span>
            <select id="targetSel" class="select">
              <option value="_self">Same tab</option>
              <option value="_blank" selected>New tab</option>
            </select>
          </div>
          <div class="row">
            <span class="label">Suggestions</span>
            <select id="suggestSel" class="select">
              <option value="on" selected>On (recent)</option>
              <option value="off">Off</option>
            </select>
          </div>
        </div>
      </div>

      <div class="group">
        <div class="group-title">Advanced</div>
        <div class="group-body">
          <div class="row">
            <span class="label">Large Search Mode</span>
            <select id="largeSel" class="select">
              <option value="off" selected>Off</option>
              <option value="on">On</option>
            </select>
          </div>

          <div class="row" style="gap:8px;justify-content:flex-start">
            <button id="btnBackup" class="small" type="button">Backup Settings (.ernet)</button>
            <button id="btnRestore" class="small" type="button">Restore Settings (.ernet)</button>
            <button id="btnReset" class="small" type="button">Reset Settings</button>
          </div>
          <input id="fileRestore" type="file" accept=".ernet,application/octet-stream,application/json" class="hidden" />
          <div class="helper">Backup/Restore works fully offline. File extension: .ernet</div>
        </div>
      </div>

      <div class="helper">Press <span class="kbd">/</span> to focus search · <span class="kbd">Esc</span> to close settings</div>
    </div>
  </aside>

<script>
const $=s=>document.querySelector(s), $$=s=>Array.from(document.querySelectorAll(s));
const LS_THEME="sp_min_theme", LS_ENGINE="sp_min_engine", LS_TARGET="sp_min_target",
      LS_BGCOLOR="sp_min_bg", LS_STYLE="sp_min_style", LS_SUG="sp_min_suggest",
      LS_RECENTS="sp_min_recents", LS_LARGE="sp_min_large";

function applyTheme(mode){
  if(mode==="auto"){
    const dark=matchMedia("(prefers-color-scheme: dark)").matches;
    document.documentElement.setAttribute("data-theme", dark?"dark":"light");
  }else{
    document.documentElement.setAttribute("data-theme", mode);
  }
}
function applyBgColor(hex){ document.documentElement.style.setProperty("--bg", hex); }
function applyStyle(v){ document.documentElement.setAttribute("data-style", v==="flat"?"flat":"rounded"); }
function applyLarge(v){ document.documentElement.setAttribute("data-ls", v==="on"?"on":"off"); }

function engineToURL(engine,q){
  if(engine==="duck") return "https://duckduckgo.com/?q="+encodeURIComponent(q);
  if(engine==="bing") return "https://www.bing.com/search?q="+encodeURIComponent(q);
  if(engine==="youtube") return "https://www.youtube.com/results?search_query="+encodeURIComponent(q);
  return "https://www.google.com/search?q="+encodeURIComponent(q);
}
function load(k,def){try{const v=JSON.parse(localStorage.getItem(k));return v??def}catch{return def}}
function save(k,v){localStorage.setItem(k,JSON.stringify(v))}
function pushRecent(q){
  let arr=load(LS_RECENTS,[]);
  q=q.trim(); if(!q) return;
  arr=arr.filter(x=>x.toLowerCase()!==q.toLowerCase());
  arr.unshift(q);
  if(arr.length>8) arr.length=8;
  save(LS_RECENTS,arr);
}

function renderSuggest(){
  const mode=(localStorage.getItem(LS_SUG)||"on");
  const wrap=$("#suggestWrap"), list=$("#suggestList");
  if(mode!=="on"){ wrap.classList.add("hidden"); return; }
  const q=$("#q").value.trim();
  const all=load(LS_RECENTS,[]);
  const items=q? all.filter(x=>x.toLowerCase().includes(q.toLowerCase())) : all;
  if(!items.length){ wrap.classList.add("hidden"); return; }
  list.innerHTML="";
  items.forEach(txt=>{
    const li=document.createElement("li");
    li.className="suggest-item";
    li.textContent=txt;
    li.onclick=()=>{ $("#q").value=txt; submitSearch(); };
    list.appendChild(li);
  });
  wrap.classList.remove("hidden");
}
function hideSuggest(){ $("#suggestWrap").classList.add("hidden"); }

function openSidebar(){
  $("#overlay").classList.add("open"); $("#overlay").setAttribute("aria-hidden","false");
  $("#sidebar").classList.add("open"); $("#sidebar").setAttribute("aria-hidden","false");
}
function closeSidebar(){
  $("#overlay").classList.remove("open"); $("#overlay").setAttribute("aria-hidden","true");
  $("#sidebar").classList.remove("open"); $("#sidebar").setAttribute("aria-hidden","true");
}

function submitSearch(){
  const q=$("#q").value.trim(); if(!q) return;
  pushRecent(q);
  const engine=localStorage.getItem(LS_ENGINE)||"google";
  const url=engineToURL(engine,q);
  const target=localStorage.getItem(LS_TARGET) || "_blank";
  hideSuggest();
  if(target==="_self") window.location.href=url; else window.open(url,"_blank","noopener");
}

/* ------- Settings init & bindings ------- */
function initSettings(){
  const theme=localStorage.getItem(LS_THEME)||"auto";
  const engine=localStorage.getItem(LS_ENGINE)||"google";
  const target=localStorage.getItem(LS_TARGET)||"_blank";
  const bg=localStorage.getItem(LS_BGCOLOR)||"#fafafa";
  const style=localStorage.getItem(LS_STYLE)||"rounded";
  const sug=localStorage.getItem(LS_SUG)||"on";
  const large=localStorage.getItem(LS_LARGE)||"off";

  $("#themeSel").value=theme; applyTheme(theme);
  $("#engineSel").value=engine;
  $("#targetSel").value=target;
  $("#bgColor").value=bg; applyBgColor(bg);
  $("#styleSel").value=style; applyStyle(style);
  $("#suggestSel").value=sug;
  $("#largeSel").value=large; applyLarge(large);

  $("#themeSel").addEventListener("change",e=>{ localStorage.setItem(LS_THEME,e.target.value); applyTheme(e.target.value); });
  matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{
    if(($("#themeSel").value||"auto")==="auto") applyTheme("auto");
  });
  $("#engineSel").addEventListener("change",e=>localStorage.setItem(LS_ENGINE,e.target.value));
  $("#targetSel").addEventListener("change",e=>localStorage.setItem(LS_TARGET,e.target.value));
  $("#bgColor").addEventListener("input",e=>{ localStorage.setItem(LS_BGCOLOR,e.target.value); applyBgColor(e.target.value); });
  $("#styleSel").addEventListener("change",e=>{ localStorage.setItem(LS_STYLE,e.target.value); applyStyle(e.target.value); });
  $("#suggestSel").addEventListener("change",e=>{ localStorage.setItem(LS_SUG,e.target.value); renderSuggest(); });
  $("#largeSel").addEventListener("change",e=>{ localStorage.setItem(LS_LARGE,e.target.value); applyLarge(e.target.value); });

  $("#btnBackup").onclick=backupSettings;
  $("#btnRestore").onclick=()=>$("#fileRestore").click();
  $("#fileRestore").addEventListener("change",restoreSettings);
  $("#btnReset").onclick=resetSettings;
}

/* ------- Backup / Restore (.ernet) ------- */
function collectSettings(){
  return {
    theme: localStorage.getItem(LS_THEME)||"auto",
    engine: localStorage.getItem(LS_ENGINE)||"google",
    target: localStorage.getItem(LS_TARGET)||"_blank",
    bg: localStorage.getItem(LS_BGCOLOR)||"#fafafa",
    style: localStorage.getItem(LS_STYLE)||"rounded",
    suggestions: localStorage.getItem(LS_SUG)||"on",
    largeSearch: localStorage.getItem(LS_LARGE)||"off",
    version: 1
  };
}
function applySettings(obj){
  const theme=obj.theme||"auto";
  const engine=obj.engine||"google";
  const target=obj.target||"_blank";
  const bg=obj.bg||"#fafafa";
  const style=obj.style||"rounded";
  const suggestions=obj.suggestions||"on";
  const large=obj.largeSearch||"off";

  localStorage.setItem(LS_THEME,theme);
  localStorage.setItem(LS_ENGINE,engine);
  localStorage.setItem(LS_TARGET,target);
  localStorage.setItem(LS_BGCOLOR,bg);
  localStorage.setItem(LS_STYLE,style);
  localStorage.setItem(LS_SUG,suggestions);
  localStorage.setItem(LS_LARGE,large);

  $("#themeSel").value=theme; applyTheme(theme);
  $("#engineSel").value=engine;
  $("#targetSel").value=target;
  $("#bgColor").value=bg; applyBgColor(bg);
  $("#styleSel").value=style; applyStyle(style);
  $("#suggestSel").value=suggestions; renderSuggest();
  $("#largeSel").value=large; applyLarge(large);
}
function backupSettings(){
  const data=collectSettings();
  const blob=new Blob([JSON.stringify(data,null,2)],{type:"application/octet-stream"});
  const url=URL.createObjectURL(blob);
  const a=document.createElement("a");
  const ts=new Date().toISOString().replace(/[:.]/g,"-");
  a.href=url; a.download=`settings_${ts}.ernet`;
  document.body.appendChild(a);
  a.click();
  setTimeout(()=>{URL.revokeObjectURL(url);a.remove()},0);
}
function restoreSettings(e){
  const f=e.target.files[0];
  if(!f){ e.target.value=""; return; }
  const r=new FileReader();
  r.onload=()=>{
    try{
      const obj=JSON.parse(r.result);
      applySettings(obj);
    }catch{
      alert("Invalid .ernet file");
    }
    e.target.value="";
  };
  r.readAsText(f);
}

/* ------- Reset ------- */
function resetSettings(){
  if(!confirm("Reset all settings to default?")) return;
  localStorage.setItem(LS_THEME,"auto");
  localStorage.setItem(LS_ENGINE,"google");
  localStorage.setItem(LS_TARGET,"_blank");
  localStorage.setItem(LS_BGCOLOR,"#fafafa");
  localStorage.setItem(LS_STYLE,"rounded");
  localStorage.setItem(LS_SUG,"on");
  localStorage.setItem(LS_LARGE,"off");
  applySettings(collectSettings());
}

/* ------- UI & Search ------- */
function initUI(){
  $("#year").textContent=(new Date()).getFullYear();

  $("#btnSettings").onclick=openSidebar;
  $("#btnClose").onclick=closeSidebar;
  $("#overlay").onclick=closeSidebar;
  document.addEventListener("keydown",e=>{
    if(e.key==="Escape") closeSidebar();
    if(e.key==="/"){ e.preventDefault(); $("#q").focus(); }
  });

  $("#q").addEventListener("input",renderSuggest);
  $("#q").addEventListener("focus",renderSuggest);
  document.addEventListener("click",e=>{
    if(!e.composedPath().includes($("#suggestWrap")) && e.target!==$("#q")) hideSuggest();
  });

  $("#searchForm").addEventListener("submit",(e)=>{ e.preventDefault(); submitSearch(); });
}

function init(){
  initSettings();
  initUI();
}
init();
</script>
</body>
</html>
